var Markdown="object"==typeof exports&&"function"==typeof require?exports:{};(function(){function q(e){return e}function t(e){return!1}function W(){}function D(){}W.prototype={chain:function(e,n){var r=this[e];if(!r)throw new Error("unknown hook "+e);this[e]=r===q?n:function(e){var t=Array.prototype.slice.call(arguments,0);return t[0]=r.apply(null,t),n.apply(null,t)}},set:function(e,t){if(!this[e])throw new Error("unknown hook "+e);this[e]=t},addNoop:function(e){this[e]=q},addFalse:function(e){this[e]=t}},Markdown.HookCollection=W,D.prototype={set:function(e,t){this["s_"+e]=t},get:function(e){return this["s_"+e]}},Markdown.Converter=function(e){var g,h,l,u,a=this.hooks=new W;a.addNoop("plainLinkText"),a.addNoop("preConversion"),a.addNoop("postNormalization"),a.addNoop("preBlockGamut"),a.addNoop("postBlockGamut"),a.addNoop("preSpanGamut"),a.addNoop("postSpanGamut"),a.addNoop("postConversion");var t,o,i,c,s,n=q,r=q;(e=e||{}).nonAsciiLetters&&(t=/[Q\u00aa\u00b5\u00ba\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376-\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u0523\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0621-\u064a\u0660-\u0669\u066e-\u066f\u0671-\u06d3\u06d5\u06e5-\u06e6\u06ee-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07c0-\u07ea\u07f4-\u07f5\u07fa\u0904-\u0939\u093d\u0950\u0958-\u0961\u0966-\u096f\u0971-\u0972\u097b-\u097f\u0985-\u098c\u098f-\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc-\u09dd\u09df-\u09e1\u09e6-\u09f1\u0a05-\u0a0a\u0a0f-\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32-\u0a33\u0a35-\u0a36\u0a38-\u0a39\u0a59-\u0a5c\u0a5e\u0a66-\u0a6f\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2-\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0-\u0ae1\u0ae6-\u0aef\u0b05-\u0b0c\u0b0f-\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32-\u0b33\u0b35-\u0b39\u0b3d\u0b5c-\u0b5d\u0b5f-\u0b61\u0b66-\u0b6f\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99-\u0b9a\u0b9c\u0b9e-\u0b9f\u0ba3-\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0be6-\u0bef\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d\u0c58-\u0c59\u0c60-\u0c61\u0c66-\u0c6f\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0-\u0ce1\u0ce6-\u0cef\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d28\u0d2a-\u0d39\u0d3d\u0d60-\u0d61\u0d66-\u0d6f\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32-\u0e33\u0e40-\u0e46\u0e50-\u0e59\u0e81-\u0e82\u0e84\u0e87-\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa-\u0eab\u0ead-\u0eb0\u0eb2-\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0ed0-\u0ed9\u0edc-\u0edd\u0f00\u0f20-\u0f29\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8b\u1000-\u102a\u103f-\u1049\u1050-\u1055\u105a-\u105d\u1061\u1065-\u1066\u106e-\u1070\u1075-\u1081\u108e\u1090-\u1099\u10a0-\u10c5\u10d0-\u10fa\u10fc\u1100-\u1159\u115f-\u11a2\u11a8-\u11f9\u1200-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u1676\u1681-\u169a\u16a0-\u16ea\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u17e0-\u17e9\u1810-\u1819\u1820-\u1877\u1880-\u18a8\u18aa\u1900-\u191c\u1946-\u196d\u1970-\u1974\u1980-\u19a9\u19c1-\u19c7\u19d0-\u19d9\u1a00-\u1a16\u1b05-\u1b33\u1b45-\u1b4b\u1b50-\u1b59\u1b83-\u1ba0\u1bae-\u1bb9\u1c00-\u1c23\u1c40-\u1c49\u1c4d-\u1c7d\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u203f-\u2040\u2054\u2071\u207f\u2090-\u2094\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2183-\u2184\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2c6f\u2c71-\u2c7d\u2c80-\u2ce4\u2d00-\u2d25\u2d30-\u2d65\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3006\u3031-\u3035\u303b-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31b7\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fc3\ua000-\ua48c\ua500-\ua60c\ua610-\ua62b\ua640-\ua65f\ua662-\ua66e\ua67f-\ua697\ua717-\ua71f\ua722-\ua788\ua78b-\ua78c\ua7fb-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8d0-\ua8d9\ua900-\ua925\ua930-\ua946\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa50-\uaa59\uac00-\ud7a3\uf900-\ufa2d\ufa30-\ufa6a\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe33-\ufe34\ufe4d-\ufe4f\ufe70-\ufe74\ufe76-\ufefc\uff10-\uff19\uff21-\uff3a\uff3f\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc]/g,o="Q".charCodeAt(0),i="A".charCodeAt(0),c="Z".charCodeAt(0),s="a".charCodeAt(0)-c-1,n=function(e){return e.replace(t,function(e){for(var t,n=e.charCodeAt(0),r="";0<n;)o<=(t=n%51+i)&&t++,c<t&&(t+=s),r=String.fromCharCode(t)+r,n=n/51|0;return"Q"+r+"Q"})},r=function(e){return e.replace(/Q([A-PR-Za-z]{1,3})Q/g,function(e,t){for(var n,r=0,u=0;u<t.length;u++)n=t.charCodeAt(u),c<n&&(n-=s),o<n&&n--,r=51*r+(n-=i);return String.fromCharCode(r)})});var d=e.asteriskIntraWordEmphasis?function(e){return-1===e.indexOf("*")&&-1===e.indexOf("_")?e:(e=(e=(e=n(e)).replace(/(?=[^\r][*_]|[*_])(^|(?=\W__|(?!\*)[\W_]\*\*|\w\*\*\w)[^\r])(\*\*|__)(?!\2)(?=\S)((?:|[^\r]*?(?!\2)[^\r])(?=\S_|\w|\S\*\*(?:[\W_]|$)).)(?=__(?:\W|$)|\*\*(?:[^*]|$))\2/g,"$1<strong>$3</strong>")).replace(/(?=[^\r][*_]|[*_])(^|(?=\W_|(?!\*)(?:[\W_]\*|\D\*(?=\w)\D))[^\r])(\*|_)(?!\2\2\2)(?=\S)((?:(?!\2)[^\r])*?(?=[^\s_]_|(?=\w)\D\*\D|[^\s*]\*(?:[\W_]|$)).)(?=_(?:\W|$)|\*(?:[^*]|$))\2/g,"$1<em>$3</em>"),r(e))}:function(e){return-1===e.indexOf("*")&&-1===e.indexOf("_")?e:(e=(e=(e=n(e)).replace(/(^|[\W_])(?:(?!\1)|(?=^))(\*|_)\2(?=\S)([^\r]*?\S)\2\2(?!\2)(?=[\W_]|$)/g,"$1<strong>$3</strong>")).replace(/(^|[\W_])(?:(?!\1)|(?=^))(\*|_)(?=\S)((?:(?!\2)[^\r])*?\S)\2(?!\2)(?=[\W_]|$)/g,"$1<em>$3</em>"),r(e))};function f(e){return e=(e=(e=(e=(e=e.replace(/^(<(p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math|ins|del)\b[^\r]*?\n<\/\2>[ \t]*(?=\n+))/gm,m)).replace(/^(<(p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math)\b[^\r]*?.*<\/\2>[ \t]*(?=\n+)\n)/gm,m)).replace(/\n[ ]{0,3}((<(hr)\b([^<>])*?\/?>)[ \t]*(?=\n{2,}))/g,m)).replace(/\n\n[ ]{0,3}(<!(--(?:|(?:[^>-]|-[^>])(?:[^-]|-[^-])*)--)>[ \t]*(?=\n{2,}))/g,m)).replace(/(?:\n\n)([ ]{0,3}(?:<([?%])[^\r]*?\2>)[ \t]*(?=\n{2,}))/g,m)}function p(e){return e=e.replace(/(^\n+|\n+$)/g,""),"\n\n~K"+(l.push(e)-1)+"K\n\n"}function m(e,t){return p(t)}this.makeHtml=function(e){if(g)throw new Error("Recursive call to converter.makeHtml");return g=new D,h=new D,l=[],u=0,e=(e=I(e="\n\n"+(e=(e=(e=(e=(e=a.preConversion(e)).replace(/~/g,"~T")).replace(/\$/g,"~D")).replace(/\r\n/g,"\n")).replace(/\r/g,"\n"))+"\n\n")).replace(/^[ \t]+$/gm,""),e=f(e=a.postNormalization(e)),e=v(e=e.replace(/^[ ]{0,3}\[([^\[\]]+)\]:[ \t]*\n?[ \t]*<?(\S+?)>?(?=\s|$)[ \t]*\n?[ \t]*((\n*)["(](.+?)[")][ \t]*)?(?:\n+)/gm,function(e,t,n,r,u,a){return t=t.toLowerCase(),g.set(t,$(n)),u?r:(a&&h.set(t,a.replace(/"/g,"&quot;")),"")})),e=(e=(e=e.replace(/~E(\d+)E/g,function(e,t){var n=parseInt(t);return String.fromCharCode(n)})).replace(/~D/g,"$$")).replace(/~T/g,"~"),e=a.postConversion(e),l=h=g=null,e};var b=function(e){return v(e)};function v(e,t){e=a.preBlockGamut(e,b);var n,r="<hr />\n";return e=S(e=(e=(e=(e=e.replace(/^(.+)[ \t]*\n=+[ \t]*\n+/gm,function(e,t){return"<h1>"+w(t)+"</h1>\n\n"}).replace(/^(.+)[ \t]*\n-+[ \t]*\n+/gm,function(e,t){return"<h2>"+w(t)+"</h2>\n\n"}).replace(/^(\#{1,6})[ \t]*(.+?)[ \t]*\#*\n+/gm,function(e,t,n){var r=t.length;return"<h"+r+">"+w(n)+"</h"+r+">\n\n"})).replace(/^[ ]{0,2}([ ]?\*[ ]?){3,}[ \t]*$/gm,r)).replace(/^[ ]{0,2}([ ]?-[ ]?){3,}[ \t]*$/gm,r)).replace(/^[ ]{0,2}([ ]?_[ ]?){3,}[ \t]*$/gm,r)),n=e,e=n=(n=(n+="~0").replace(/(?:\n\n|^\n?)((?:(?:[ ]{4}|\t).*\n+)+)(\n*[ ]{0,3}[^ \t\n]|(?=~0))/g,function(e,t,n){var r=t,u=n;return"\n\n"+(r="<pre><code>"+(r=(r=(r=I(r=E(B(r)))).replace(/^\n+/g,"")).replace(/\n+$/g,""))+"\n</code></pre>")+"\n\n"+u})).replace(/~0/,""),e=e.replace(/((^[ \t]*>[ \t]?.+\n(.+\n)*\n*)+)/gm,function(e,t){var n=t;return p("<blockquote>\n"+(n=(n=(n=v(n=(n=(n=n.replace(/^[ \t]*>[ \t]?/gm,"~0")).replace(/~0/g,"")).replace(/^[ \t]+$/gm,""))).replace(/(^|\n)/g,"$1  ")).replace(/(\s*<pre>[^\r]+?<\/pre>)/gm,function(e,t){var n=t;return n=(n=n.replace(/^  /gm,"~0")).replace(/~0/g,"")}))+"\n</blockquote>")}),e=function(e,t){for(var n=(e=(e=e.replace(/^\n+/g,"")).replace(/\n+$/g,"")).split(/\n{2,}/g),r=[],u=/~K(\d+)K/,a=n.length,o=0;o<a;o++){var i=n[o];u.test(i)?r.push(i):/\S/.test(i)&&(i=(i=w(i)).replace(/^([ \t]*)/g,"<p>"),i+="</p>",r.push(i))}if(!t){a=r.length;for(o=0;o<a;o++)for(var c=!0;c;)c=!1,r[o]=r[o].replace(/~K(\d+)K/g,function(e,t){return c=!0,l[t]})}return r.join("\n\n")}(e=f(e=a.postBlockGamut(e,b)),t)}function w(e){var t,n;return e=a.preSpanGamut(e),e=e.replace(/(^|[^\\`])(`+)(?!`)([^\r]*?[^`])\2(?!`)/gm,function(e,t,n,r,u){var a=r;return t+"<code>"+(a=(a=E(a=(a=a.replace(/^([ \t]*)/g,"")).replace(/[ \t]*$/g,""))).replace(/:\/\//g,"~P"))+"</code>"}),e=e.replace(/(<[a-z\/!$]("[^"]*"|'[^']*'|[^'">])*>|<!(--(?:|(?:[^>-]|-[^>])(?:[^-]|-[^-])*)--)>)/gi,function(e){return N(e.replace(/(.)<\/?code>(?=.)/g,"$1`"),"!"==e.charAt(1)?"\\`*_/":"\\`*_")}),e=e.replace(/\\(\\)/g,A).replace(/\\([`*_{}\[\]()>#+-.!])/g,A),e=-1===(t=e).indexOf("![")?t:t=(t=t.replace(/(!\[(.*?)\][ ]?(?:\n[ ]*)?\[(.*?)\])()()()()/g,T)).replace(/(!\[(.*?)\]\s?\([ \t]*()<?(\S+?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g,T),e=$(e=(e=function(e){e=e.replace(F,H);return e=e.replace(/<((https?|ftp):[^'">\s]+)>/gi,function(e,t){var n;return'<a href="'+R(t)+'">'+a.plainLinkText(t)+"</a>"})}(e=-1===(n=e).indexOf("[")?n:n=(n=(n=n.replace(/(\[((?:\[[^\]]*\]|[^\[\]])*)\][ ]?(?:\n[ ]*)?\[(.*?)\])()()()()/g,k)).replace(/(\[((?:\[[^\]]*\]|[^\[\]])*)\]\([ \t]*()<?((?:\([^)]*\)|[^()\s])*?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g,k)).replace(/(\[([^\[\]]+)\])()()()()()/g,k))).replace(/~P/g,"://")),e=(e=d(e)).replace(/  +\n/g," <br>\n"),e=a.postSpanGamut(e)}function k(e,t,n,r,u,a,o,i){null==i&&(i="");var c=t,l=n.replace(/:\/\//g,"~P"),s=r.toLowerCase(),d=u,f=i;if(""==d)if(""==s&&(s=l.toLowerCase().replace(/ ?\n/g," ")),d="#"+s,null!=g.get(s))d=g.get(s),null!=h.get(s)&&(f=h.get(s));else{if(!(-1<c.search(/\(\s*\)$/m)))return c;d=""}var p='<a href="'+(d=R(d))+'"';return""!=f&&(p+=' title="'+(f=N(f=x(f),"*_"))+'"'),p+=">"+l+"</a>"}function x(e){return e.replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function T(e,t,n,r,u,a,o,i){var c=t,l=n,s=r.toLowerCase(),d=u,f=(f=i)||"";if(""==d){if(""==s&&(s=l.toLowerCase().replace(/ ?\n/g," ")),d="#"+s,null==g.get(s))return c;d=g.get(s),null!=h.get(s)&&(f=h.get(s))}l=N(x(l),"*_[]()");var p='<img src="'+(d=N(d,"*_"))+'" alt="'+l+'"';return p+=' title="'+(f=N(f=x(f),"*_"))+'"',p+=" />"}function S(e,c){e+="~0";var t=/^(([ ]{0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(~0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm;return e=(e=u?e.replace(t,function(e,t,n){var r,u=t,a=-1<n.search(/[*+-]/g)?"ul":"ol";"ol"==a&&(r=parseInt(n,10));var o=C(u,a,c),i="<"+a;return r&&1!==r&&(i+=' start="'+r+'"'),o=i+">"+(o=o.replace(/\s+$/,""))+"</"+a+">\n"}):(t=/(\n\n|^\n?)(([ ]{0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(~0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/g,e.replace(t,function(e,t,n,r){var u,a=t,o=n,i=-1<r.search(/[*+-]/g)?"ul":"ol";"ol"==i&&(u=parseInt(r,10));var c=C(o,i),l="<"+i;return u&&1!==u&&(l+=' start="'+u+'"'),c=a+l+">\n"+c+"</"+i+">\n"}))).replace(/~0/,"")}var y={ol:"\\d+[.]",ul:"[*+-]"};function C(e,t,o){u++,e=e.replace(/\n{2,}$/,"\n"),e+="~0";var n=y[t],r=new RegExp("(^[ \\t]*)("+n+")[ \\t]+([^\\r]+?(\\n+))(?=(~0|\\1("+n+")[ \\t]+))","gm"),i=!1;return e=(e=e.replace(r,function(e,t,n,r){var u=r,a=/\n\n$/.test(u);return a||-1<u.search(/\n{2,}/)||i?u=v(B(u),!0):(u=(u=S(B(u),!0)).replace(/\n$/,""),o||(u=w(u))),i=a,"<li>"+u+"</li>\n"})).replace(/~0/g,""),u--,e}function E(e){return e=N(e=(e=(e=e.replace(/&/g,"&amp;")).replace(/</g,"&lt;")).replace(/>/g,"&gt;"),"*_{}[]\\",!1)}function $(e){return e=(e=e.replace(/&(?!#?[xX]?(?:[0-9a-fA-F]+|\w+);)/g,"&amp;")).replace(/<(?![a-z\/?!]|~D)/gi,"&lt;")}var L="[-A-Z0-9+&@#/%=~_|[\\])]",F=new RegExp('(="|<)?\\b(https?|ftp)(://[-A-Z0-9+&@#/%?=~_|[\\]()!:,.;]*'+L+")(?=$|\\W)","gi"),_=new RegExp(L,"i");function H(e,t,n,r){if(t)return e;if(")"!==r.charAt(r.length-1))return"<"+n+r+">";for(var u=r.match(/[()]/g),a=0,o=0;o<u.length;o++)"("===u[o]?a<=0?a=1:a++:a--;var i,c,l="";return a<0&&(i=new RegExp("\\){1,"+-a+"}$"),r=r.replace(i,function(e){return l=e,""})),l&&(c=r.charAt(r.length-1),_.test(c)||(l=c+l,r=r.substr(0,r.length-1))),"<"+n+r+">"+l}function B(e){return e=(e=e.replace(/^(\t|[ ]{1,4})/gm,"~0")).replace(/~0/g,"")}function I(e){if(!/\t/.test(e))return e;var n,r=["    ","   ","  "," "],u=0;return e.replace(/[\n\t]/g,function(e,t){return"\n"===e?(u=t+1,e):(n=(t-u)%4,u=t+1,r[n])})}function R(e){return e=N(e=x(e),"*_:()[]")}function N(e,t,n){var r="(["+t.replace(/([\[\]\\])/g,"\\$1")+"])";n&&(r="\\\\"+r);var u=new RegExp(r,"g");return e=e.replace(u,A)}function A(e,t){return"~E"+t.charCodeAt(0)+"E"}}})(),function(){var v={},m={},w={},k=window.document,p=window.RegExp,x=window.navigator,g=72,T={isIE:/msie/.test(x.userAgent.toLowerCase()),isIE_5or6:/msie 6/.test(x.userAgent.toLowerCase())||/msie 5/.test(x.userAgent.toLowerCase()),isOpera:/opera/.test(x.userAgent.toLowerCase())},n={bold:"Strong <strong> Ctrl+B",boldexample:"strong text",italic:"Emphasis <em> Ctrl+I",italicexample:"emphasized text",link:"Hyperlink <a> Ctrl+L",linkdescription:"enter link description here",linkdialog:'<p><b>Insert Hyperlink</b></p><p>http://example.com/ "optional title"</p>',linkname:null,quote:"Blockquote <blockquote> Ctrl+Q",quoteexample:"Blockquote",code:"Code Sample <pre><code> Ctrl+K",codeexample:"enter code here",image:"Image <img> Ctrl+G",imagedescription:"enter image description here",imagedialog:"<p><b>Insert Image</b></p><p>http://example.com/images/diagram.jpg \"optional title\"<br>Need <a href='http://www.google.com/search?q=free+image+hosting' target='_blank'>free image hosting?</a></p>",imagename:null,olist:"Numbered List <ol> Ctrl+O",ulist:"Bulleted List <ul> Ctrl+U",litem:"List item",heading:"Heading <h1>/<h2> Ctrl+H",headingexample:"Heading",more:"More contents \x3c!--more--\x3e Ctrl+M",fullscreen:"FullScreen Ctrl+J",exitFullscreen:"Exit FullScreen Ctrl+E",fullscreenUnsupport:"Sorry, the browser dont support fullscreen api",hr:"Horizontal Rule <hr> Ctrl+R",undo:"Undo - Ctrl+Z",redo:"Redo - Ctrl+Y",redomac:"Redo - Ctrl+Shift+Z",ok:"OK",cancel:"Cancel",help:"Markdown Editing Help"};function t(){}function d(e){this.buttonBar=k.getElementById("wmd-button-bar"+e),this.preview=k.getElementById("wmd-preview"+e),this.input=k.getElementById("text")}function f(t,n){function r(e,t){s!=e&&(s=e,t||g()),T.isIE&&"moving"==s?o=null:a=setTimeout(d,1)}var u,a,o,i=this,c=[],l=0,s="none",d=function(e){o=new S(n,e),a=void 0};this.setCommandMode=function(){s="command",g(),a=setTimeout(d,0)},this.canUndo=function(){return 1<l},this.canRedo=function(){return!!c[l+1]},this.undo=function(){i.canUndo()&&(u?(u.restore(),u=null):(c[l]=new S(n),c[--l].restore(),t&&t())),s="none",n.input.focus(),d()},this.redo=function(){i.canRedo()&&(c[++l].restore(),t&&t()),s="none",n.input.focus(),d()};function f(e){var t=!1;if((e.ctrlKey||e.metaKey)&&!e.altKey){var n=e.charCode||e.keyCode;switch(String.fromCharCode(n).toLowerCase()){case"y":i.redo(),t=!0;break;case"z":e.shiftKey?i.redo():i.undo(),t=!0}}if(t)return e.preventDefault&&e.preventDefault(),void(window.event&&(window.event.returnValue=!1))}function p(e){var t;e.ctrlKey||e.metaKey||(33<=(t=e.keyCode)&&t<=40||63232<=t&&t<=63235?r("moving"):8==t||46==t||127==t?r("deleting"):13==t?r("newlines"):27==t?r("escape"):(t<16||20<t)&&91!=t&&r("typing"))}var g=function(){var e=o||new S(n);if(!e)return!1;"moving"!=s?(u&&(c[l-1].text!=u.text&&(c[l++]=u),u=null),c[l++]=e,c[l+1]=null,t&&t()):u=u||e};!function(){v.addEvent(n.input,"keypress",function(e){!e.ctrlKey&&!e.metaKey||e.altKey||89!=e.keyCode&&90!=e.keyCode||e.preventDefault()});function e(){(T.isIE||o&&o.text!=n.input.value)&&null==a&&(s="paste",g(),d())}v.addEvent(n.input,"keydown",f),v.addEvent(n.input,"keydown",p),v.addEvent(n.input,"mousedown",function(){r("moving")}),n.input.onpaste=e,n.input.ondrop=e}(),d(!0),g()}function S(a,e){var o=this,i=a.input;this.init=function(){v.isVisible(i)&&(!e&&k.activeElement&&k.activeElement!==i||(this.setInputAreaSelectionStartEnd(),this.scrollTop=i.scrollTop,(!this.text&&i.selectionStart||0===i.selectionStart)&&(this.text=i.value)))},this.setInputAreaSelection=function(){if(v.isVisible(i))if(void 0===i.selectionStart||T.isOpera){if(k.selection){if(k.activeElement&&k.activeElement!==i)return;i.focus();var e=i.createTextRange();e.moveStart("character",-i.value.length),e.moveEnd("character",-i.value.length),e.moveEnd("character",o.end),e.moveStart("character",o.start),e.select()}}else i.focus(),i.selectionStart=o.start,i.selectionEnd=o.end,i.scrollTop=o.scrollTop},this.setInputAreaSelectionStartEnd=function(){if(a.ieCachedRange||!i.selectionStart&&0!==i.selectionStart){if(k.selection){o.text=v.fixEolChars(i.value);var e=a.ieCachedRange||k.selection.createRange(),t=v.fixEolChars(e.text),n=""+t+"";e.text=n;var r=v.fixEolChars(i.value);e.moveStart("character",-n.length),e.text=t,o.start=r.indexOf(""),o.end=r.lastIndexOf("")-"".length;var u=o.text.length-v.fixEolChars(i.value).length;if(u){for(e.moveStart("character",-t.length);u--;)t+="\n",o.end+=1;e.text=t}a.ieCachedRange&&(o.scrollTop=a.ieCachedScrollTop),a.ieCachedRange=null,this.setInputAreaSelection()}}else o.start=i.selectionStart,o.end=i.selectionEnd},this.restore=function(){null!=o.text&&o.text!=i.value&&(i.value=o.text),this.setInputAreaSelection(),i.scrollTop=o.scrollTop},this.getChunks=function(){var e=new t;return e.before=v.fixEolChars(o.text.substring(0,o.start)),e.startTag="",e.selection=v.fixEolChars(o.text.substring(o.start,o.end)),e.endTag="",e.after=v.fixEolChars(o.text.substring(o.end)),e.scrollTop=o.scrollTop,e},this.setChunks=function(e){e.before=e.before+e.startTag,e.after=e.endTag+e.after,this.start=e.before.length,this.end=e.before.length+e.selection.length,this.text=e.before+e.selection+e.after,this.scrollTop=e.scrollTop},this.init()}function h(r,u,a){function o(){var e=0;return window.innerHeight?e=window.pageYOffset:k.documentElement&&k.documentElement.scrollTop?e=k.documentElement.scrollTop:k.body&&(e=k.body.scrollTop),e}function t(){var e,t,n;u.preview&&((t=u.input.value)&&t==l||(l=t,e=(new Date).getTime(),t=r.makeHtml(t),n=(new Date).getTime(),c=n-e,h(t)))}function n(){i&&(clearTimeout(i),i=void 0);var e=0;3e3<(e=c)&&(e=3e3),i=setTimeout(t,e)}var i,c,l;this.refresh=function(e){e?(l="",t()):n()},this.processingTime=function(){return c};function s(e){var t=u.preview,n=t.parentNode,r=t.nextSibling;n.removeChild(t),t.innerHTML=e,r?n.insertBefore(t,r):n.appendChild(t)}function d(e){u.preview.innerHTML=e}var f,e,p,g=!0,h=function(e){var t,n,r=m.getTop(u.input)-o();u.preview&&(function(t){if(f)return f(t);try{d(t),f=d}catch(e){(f=s)(t)}}(e),a()),u.preview&&(u.preview.scrollTop=(u.preview.scrollHeight-u.preview.clientHeight)*((t=u.preview).scrollHeight<=t.clientHeight?1:t.scrollTop/(t.scrollHeight-t.clientHeight))),g?g=!1:(n=m.getTop(u.input)-o(),T.isIE?setTimeout(function(){window.scrollBy(0,n-r)},0):window.scrollBy(0,n-r))};e=u.input,p=n,v.addEvent(e,"input",p),e.onpaste=p,e.ondrop=p,v.addEvent(e,"keypress",p),v.addEvent(e,"keydown",p),t(),u.preview&&(u.preview.scrollTop=0)}function b(c,l,s,u,a,n,d,f,p){var o=l.input,g={};!function(){var e=l.buttonBar,o=document.createElement("ul");o.id="wmd-button-row"+c,o.className="wmd-button-row",o=e.appendChild(o);function t(e,t,n,r){var u=document.createElement("li");u.className="wmd-button",u.style.left=i+"px",i+=25;var a=document.createElement("span");return u.id=e+c,u.appendChild(a),u.title=t,u.XShift=n,r&&(u.textOp=r),h(u,!0),o.appendChild(u),u}function n(e){var t=document.createElement("li");t.className="wmd-spacer wmd-spacer"+e,t.id="wmd-spacer"+e+c,o.appendChild(t),i+=25}var i=0;g.bold=t("wmd-bold-button",p("bold"),"0px",m("doBold")),g.italic=t("wmd-italic-button",p("italic"),"-20px",m("doItalic")),n(1),g.link=t("wmd-link-button",p("link"),"-40px",m(function(e,t){return this.doLinkOrImage(e,t,!1)})),g.quote=t("wmd-quote-button",p("quote"),"-60px",m("doBlockquote")),g.code=t("wmd-code-button",p("code"),"-80px",m("doCode")),g.image=t("wmd-image-button",p("image"),"-100px",m(function(e,t){return this.doLinkOrImage(e,t,!0)})),n(2),g.olist=t("wmd-olist-button",p("olist"),"-120px",m(function(e,t){this.doList(e,t,!0)})),g.ulist=t("wmd-ulist-button",p("ulist"),"-140px",m(function(e,t){this.doList(e,t,!1)})),g.heading=t("wmd-heading-button",p("heading"),"-160px",m("doHeading")),g.hr=t("wmd-hr-button",p("hr"),"-180px",m("doHorizontalRule")),g.more=t("wmd-more-button",p("more"),"-280px",m("doMore")),n(3),g.undo=t("wmd-undo-button",p("undo"),"-200px",null),g.undo.execute=function(e){e&&e.undo()};var r=/win/.test(x.platform.toLowerCase())?p("redo"):p("redomac");{var u,a;g.redo=t("wmd-redo-button",r,"-220px",null),g.redo.execute=function(e){e&&e.redo()},n(4),g.fullscreen=t("wmd-fullscreen-button",p("fullscreen"),"-240px",null),g.fullscreen.execute=function(){d.doFullScreen(g,!0)},g.exitFullscreen=t("wmd-exit-fullscreen-button",p("exitFullscreen"),"-260px",null),g.exitFullscreen.style.display="none",g.exitFullscreen.execute=function(){d.doFullScreen(g,!1)},s.makeButton(g,t,m,w),f&&(u=document.createElement("li"),a=document.createElement("span"),u.appendChild(a),u.className="wmd-button wmd-help-button",u.id="wmd-help-button"+c,u.XShift="-300px",u.isHelp=!0,u.style.right="0px",u.title=p("help"),u.onclick=f.handler,h(u,!0),o.appendChild(u),g.help=u)}b()}();var e="keydown";function r(e){if(o.focus(),e.textOp){u&&u.setCommandMode();var t=new S(l);if(!t)return;function n(){o.focus(),r&&t.setChunks(r),t.restore(),a.refresh()}var r=t.getChunks();e.textOp(r,n)||n()}e.execute&&e.execute(u)}function h(e,t){var n=e.getElementsByTagName("span")[0];t?(n.style.backgroundPosition=e.XShift+" 0px",e.onmouseover=function(){n.style.backgroundPosition=this.XShift+" -40px"},e.onmouseout=function(){n.style.backgroundPosition=this.XShift+" 0px"},T.isIE&&(e.onmousedown=function(){k.activeElement&&k.activeElement!==l.input||(l.ieCachedRange=document.selection.createRange(),l.ieCachedScrollTop=l.input.scrollTop)}),e.isHelp||(e.onclick=function(){return this.onmouseout&&this.onmouseout(),r(this),!1})):(n.style.backgroundPosition=e.XShift+" -20px",e.onmouseover=e.onmouseout=e.onclick=function(){})}function m(e){var t;return"string"==typeof e&&(e=n[t=e]),function(){e.apply(n,arguments),t&&s.commandExecuted(t)}}function b(){u&&(h(g.undo,u.canUndo()),h(g.redo,u.canRedo()))}T.isOpera&&(e="keypress"),v.addEvent(o,e,function(e){if(!e.ctrlKey&&!e.metaKey||e.altKey||e.shiftKey){var t;9==e.keyCode&&window.fullScreenEntered&&((t={}).textOp=m("doTab"),r(t),e.preventDefault&&e.preventDefault(),window.event&&(window.event.returnValue=!1))}else{var n=e.charCode||e.keyCode;switch(String.fromCharCode(n).toLowerCase()){case"b":r(g.bold);break;case"i":r(g.italic);break;case"l":r(g.link);break;case"q":r(g.quote);break;case"k":r(g.code);break;case"g":r(g.image);break;case"o":r(g.olist);break;case"u":r(g.ulist);break;case"m":r(g.more);break;case"j":r(g.fullscreen);break;case"e":r(g.exitFullscreen);break;case"h":r(g.heading);break;case"r":r(g.hr);break;case"y":r(g.redo);break;case"z":e.shiftKey?r(g.redo):r(g.undo);break;default:return}e.preventDefault&&e.preventDefault(),window.event&&(window.event.returnValue=!1)}}),v.addEvent(o,"keyup",function(e){var t;!e.shiftKey||e.ctrlKey||e.metaKey||13===(e.charCode||e.keyCode)&&((t={}).textOp=m("doAutoindent"),r(t))}),T.isIE&&v.addEvent(o,"keydown",function(e){if(27===e.keyCode)return!1}),this.setUndoRedoButtonStates=b}function y(e,t){this.hooks=e,this.getString=t}Markdown.Editor=function(u,a,o){"function"==typeof(o=o||{}).handler&&(o={helpButton:o}),o.strings=o.strings||{},o.helpButton&&(o.strings.help=o.strings.help||o.helpButton.title);function i(e){var t=o.strings[e]||n[e];return"imagename"!=e&&"linkname"!=e||(o.strings[e]=null),t}a=a||"";var c=this.hooks=new Markdown.HookCollection;c.addNoop("onPreviewRefresh"),c.addNoop("postBlockquoteCreation"),c.addFalse("insertImageDialog"),c.addFalse("insertLinkDialog"),c.addNoop("makeButton"),c.addNoop("commandExecuted"),c.addNoop("enterFullScreen"),c.addNoop("enterFakeFullScreen"),c.addNoop("exitFullScreen"),this.getConverter=function(){return u};var l,s=this;this.run=function(){var e,t,n,r;l||(l=new d(a),e=new y(c,i),t=new h(u,l,function(){c.onPreviewRefresh()}),/\?noundo/.test(k.location.href)||(n=new f(function(){t.refresh(),r&&r.setUndoRedoButtonStates()},l),this.textOperation=function(e){n.setCommandMode(),e(),s.refreshPreview()}),fullScreenManager=new C(c,i),(r=new b(a,l,c,n,t,e,fullScreenManager,o.helpButton,i)).setUndoRedoButtonStates(),(s.refreshPreview=function(){t.refresh(!0)})())}},t.prototype.findTags=function(e,t){var n,r=this;e&&(n=v.extendRegExp(e,"","$"),this.before=this.before.replace(n,function(e){return r.startTag=r.startTag+e,""}),n=v.extendRegExp(e,"^",""),this.selection=this.selection.replace(n,function(e){return r.startTag=r.startTag+e,""})),t&&(n=v.extendRegExp(t,"","$"),this.selection=this.selection.replace(n,function(e){return r.endTag=e+r.endTag,""}),n=v.extendRegExp(t,"^",""),this.after=this.after.replace(n,function(e){return r.endTag=e+r.endTag,""}))},t.prototype.trimWhitespace=function(e){var t,n,r=this;e?t=n="":(t=function(e){return r.before+=e,""},n=function(e){return r.after=e+r.after,""}),this.selection=this.selection.replace(/^(\s*)/,t).replace(/(\s*)$/,n)},t.prototype.skipLines=function(e,t,n){var r,u;if(void 0===e&&(e=1),void 0===t&&(t=1),e++,t++,navigator.userAgent.match(/Chrome/)&&"X".match(/()./),this.selection=this.selection.replace(/(^\n*)/,""),this.startTag=this.startTag+p.$1,this.selection=this.selection.replace(/(\n*$)/,""),this.endTag=this.endTag+p.$1,this.startTag=this.startTag.replace(/(^\n*)/,""),this.before=this.before+p.$1,this.endTag=this.endTag.replace(/(\n*$)/,""),this.after=this.after+p.$1,this.before){for(r=u="";e--;)r+="\\n?",u+="\n";n&&(r="\\n*"),this.before=this.before.replace(new p(r+"$",""),u)}if(this.after){for(r=u="";t--;)r+="\\n?",u+="\n";n&&(r="\\n*"),this.after=this.after.replace(new p(r,""),u)}},v.isVisible=function(e){return window.getComputedStyle?"none"!==window.getComputedStyle(e,null).getPropertyValue("display"):e.currentStyle?"none"!==e.currentStyle.display:void 0},v.addEvent=function(e,t,n){e.attachEvent?e.attachEvent("on"+t,n):e.addEventListener(t,n,!1)},v.removeEvent=function(e,t,n){e.detachEvent?e.detachEvent("on"+t,n):e.removeEventListener(t,n,!1)},v.fixEolChars=function(e){return e=(e=e.replace(/\r\n/g,"\n")).replace(/\r/g,"\n")},v.extendRegExp=function(e,t,n){null==t&&(t=""),null==n&&(n="");var r,u=e.toString();return u=(u=u.replace(/\/([gim]*)$/,function(e,t){return r=t,""})).replace(/(^\/|\/$)/g,""),new p(u=t+u+n,r)},m.getTop=function(e,t){var n=e.offsetTop;if(!t)for(;e=e.offsetParent;)n+=e.offsetTop;return n},m.getHeight=function(e){return e.offsetHeight||e.scrollHeight},m.getWidth=function(e){return e.offsetWidth||e.scrollWidth},m.getPageSize=function(){var e,t,n,r=self.innerHeight&&self.scrollMaxY?(e=k.body.scrollWidth,self.innerHeight+self.scrollMaxY):k.body.scrollHeight>k.body.offsetHeight?(e=k.body.scrollWidth,k.body.scrollHeight):(e=k.body.offsetWidth,k.body.offsetHeight);return self.innerHeight?(t=self.innerWidth,n=self.innerHeight):k.documentElement&&k.documentElement.clientHeight?(t=k.documentElement.clientWidth,n=k.documentElement.clientHeight):k.body&&(t=k.body.clientWidth,n=k.body.clientHeight),[Math.max(e,t),Math.max(r,n),t,n]},w.createBackground=function(){var e=k.createElement("div"),t=e.style;e.className="wmd-prompt-background",t.position="absolute",t.top="0",t.zIndex="1000",T.isIE?t.filter="alpha(opacity=50)":t.opacity="0.5";var n=m.getPageSize();return t.height=n[1]+"px",T.isIE?(t.left=k.documentElement.scrollLeft,t.width=k.documentElement.clientWidth):(t.left="0",t.width="100%"),k.body.appendChild(e),e},w.dialog=function(u,t,a,o){function i(e){27===(e.charCode||e.keyCode)&&l(!0)}var c,l=function(e){return v.removeEvent(k.body,"keydown",i),c.parentNode.removeChild(c),t(e),!1};setTimeout(function(){!function(){(c=k.createElement("div")).className="wmd-prompt-dialog",c.setAttribute("role","dialog");var e=k.createElement("div"),t=k.createElement("form");t.style;t.onsubmit=function(){return l(!1)},c.appendChild(t),t.appendChild(e),"function"==typeof u?u.call(this,e):e.innerHTML=u;var n=k.createElement("button");n.type="button",n.className="btn btn-s primary",n.onclick=function(){return l(!1)},n.innerHTML=a;var r=k.createElement("button");r.type="button",r.className="btn btn-s",r.onclick=function(){return l(!0)},r.innerHTML=o,t.appendChild(n),t.appendChild(r),v.addEvent(k.body,"keydown",i),k.body.appendChild(c)}()},0)},w.prompt=function(u,a,n,o,i){var c,l;void 0===a&&(a="");function s(e){27===(e.charCode||e.keyCode)&&d(!0)}var d=function(e){v.removeEvent(k.body,"keydown",s);var t=l.value;return e?t=null:(t=t.replace(/^http:\/\/(https?|ftp):\/\//,"$1://"),/^(?:https?|ftp):\/\//.test(t)||/^[_a-z0-9-]+:/i.test(t)||(t="http://"+t)),c.parentNode.removeChild(c),n(t),!1};setTimeout(function(){!function(){(c=k.createElement("div")).className="wmd-prompt-dialog",c.setAttribute("role","dialog");var e=k.createElement("div");e.innerHTML=u,c.appendChild(e);var t=k.createElement("form");t.style;t.onsubmit=function(){return d(!1)},c.appendChild(t),(l=k.createElement("input")).type="text",l.value=a,t.appendChild(l);var n=k.createElement("button");n.type="button",n.className="btn btn-s primary",n.onclick=function(){return d(!1)},n.innerHTML=o;var r=k.createElement("button");r.type="button",r.className="btn btn-s",r.onclick=function(){return d(!0)},r.innerHTML=i,t.appendChild(n),t.appendChild(r),v.addEvent(k.body,"keydown",s),k.body.appendChild(c)}();var e,t=a.length;void 0!==l.selectionStart?(l.selectionStart=0,l.selectionEnd=t):l.createTextRange&&((e=l.createTextRange()).collapse(!1),e.moveStart("character",-t),e.moveEnd("character",t),e.select()),l.focus()},0)};var e=y.prototype;function C(e,t){this.fullScreenBind=!1,this.hooks=e,this.getString=t,this.isFakeFullScreen=!1}function u(){return document.fullScreen||document.mozFullScreen||document.webkitIsFullScreen||document.msIsFullScreen}e.prefixes="(?:\\s{4,}|\\s*>|\\s*-\\s+|\\s*\\d+\\.|=|\\+|-|_|\\*|#|\\s*\\[[^\n]]+\\]:)",e.unwrap=function(e){var t=new p("([^\\n])\\n(?!(\\n|"+this.prefixes+"))","g");e.selection=e.selection.replace(t,"$1 $2")},e.wrap=function(e,t){this.unwrap(e);var n=new p("(.{1,"+t+"})( +|$\\n?)","gm"),r=this;e.selection=e.selection.replace(n,function(e,t){return new p("^"+r.prefixes,"").test(e)?e:t+"\n"}),e.selection=e.selection.replace(/\s+$/,"")},e.doBold=function(e,t){return this.doBorI(e,t,2,this.getString("boldexample"))},e.doItalic=function(e,t){return this.doBorI(e,t,1,this.getString("italicexample"))},e.doBorI=function(e,t,n,r){e.trimWhitespace(),e.selection=e.selection.replace(/\n{2,}/g,"\n");var u,a,o=/(\**$)/.exec(e.before)[0],i=/(^\**)/.exec(e.after)[0],c=Math.min(o.length,i.length);n<=c&&(2!=c||1!=n)?(e.before=e.before.replace(p("[*]{"+n+"}$",""),""),e.after=e.after.replace(p("^[*]{"+n+"}",""),"")):!e.selection&&i?(e.after=e.after.replace(/^([*_]*)/,""),e.before=e.before.replace(/(\s?)$/,""),u=p.$1,e.before=e.before+i+u):(e.selection||i||(e.selection=r),a=n<=1?"*":"**",e.before=e.before+a,e.after=a+e.after)},e.stripLinkDefs=function(e,a){return e=e.replace(/^[ ]{0,3}\[(\d+)\]:[ \t]*\n?[ \t]*<?(\S+?)>?[ \t]*\n?[ \t]*(?:(\n*)["(](.+?)[")][ \t]*)?(?:\n+|$)/gm,function(e,t,n,r,u){return a[t]=e.replace(/\s*$/,""),r?(a[t]=e.replace(/["(](.+?)[")]$/,""),r+u):""})},e.addLinkDef=function(e,t){var o=0,i={};e.before=this.stripLinkDefs(e.before,i),e.selection=this.stripLinkDefs(e.selection,i),e.after=this.stripLinkDefs(e.after,i);function c(e){o++,e=e.replace(/^[ ]{0,3}\[(\d+)\]:/,"  ["+o+"]:"),n+="\n"+e}var n="",l=/(\[)((?:\[[^\]]*\]|[^\[\]])*)(\][ ]?(?:\n[ ]*)?\[)(\d+)(\])/g,s=function(e,t,n,r,u,a){return n=n.replace(l,s),i[u]?(c(i[u]),t+n+r+o+a):e};e.before=e.before.replace(l,s),t?c(t):e.selection=e.selection.replace(l,s);var r=o;return e.after=e.after.replace(l,s),e.after&&(e.after=e.after.replace(/\n*$/,"")),e.after||(e.selection=e.selection.replace(/\n*$/,"")),e.after+="\n\n"+n,r},e.doLinkOrImage=function(a,o,i){if(a.trimWhitespace(),a.findTags(/\s*!?\[/,/\][ ]?(?:\n[ ]*)?(\[.*?\])?/),!(1<a.endTag.length&&0<a.startTag.length)){if(a.selection=a.startTag+a.selection+a.endTag,a.startTag=a.endTag="",/\n\n/.test(a.selection))return void this.addLinkDef(a,null);function e(e){var t,n,r,u;l.parentNode.removeChild(l),null!==e&&(a.selection=(" "+a.selection).replace(/([^\\](?:\\\\)*)(?=[[\]])/g,"$1\\").substr(1),t=" [999]: "+e.replace(/^\s*(.*?)(?:\s+"(.+)")?\s*$/,function(e,t,n){var r=!1;return t=t.replace(/%(?:[\da-fA-F]{2})|\?|\+|[^\w\d-./[\]]/g,function(e){if(3===e.length&&"%"==e.charAt(0))return e.toUpperCase();switch(e){case"?":return r=!0,"?";case"+":if(r)return"%20"}return encodeURI(e)}),(n=n&&(n=n.trim?n.trim():n.replace(/^\s*/,"").replace(/\s*$/,"")).replace(/"/g,"quot;").replace(/\(/g,"&#40;").replace(/\)/g,"&#41;").replace(/</g,"&lt;").replace(/>/g,"&gt;"))?t+' "'+n+'"':t}),n=c.addLinkDef(a,t),a.startTag=i?"![":"[",a.endTag="]["+n+"]",a.selection||(i?(r=c.getString("imagename"),a.selection=r||c.getString("imagedescription")):(u=c.getString("linkname"),a.selection=u||c.getString("linkdescription")))),o(),c.hooks.commandExecuted(i?"doImage":"doLink")}var c=this,l=w.createBackground();return i?this.hooks.insertImageDialog(e)||w.prompt(this.getString("imagedialog"),"http://",e,this.getString("ok"),this.getString("cancel")):this.hooks.insertLinkDialog(e)||w.prompt(this.getString("linkdialog"),"http://",e,this.getString("ok"),this.getString("cancel")),!0}a.startTag=a.startTag.replace(/!?\[/,""),a.endTag="",this.addLinkDef(a,null)},e.doAutoindent=function(t,e){var n=this,r=!1;t.before=t.before.replace(/(\n|^)[ ]{0,3}([*+-]|\d+[.])[ \t]*\n$/,"\n\n"),t.before=t.before.replace(/(\n|^)[ ]{0,3}>[ \t]*\n$/,"\n\n"),t.before=t.before.replace(/(\n|^)[ \t]+\n$/,"\n\n"),t.selection||/^[ \t]*(?:\n|$)/.test(t.after)||(t.after=t.after.replace(/^[^\n]*/,function(e){return t.selection=e,""}),r=!0),/(\n|^)[ ]{0,3}([*+-]|\d+[.])[ \t]+.*\n$/.test(t.before)&&n.doList&&n.doList(t),/(\n|^)[ ]{0,3}>[ \t]+.*\n$/.test(t.before)&&n.doBlockquote&&n.doBlockquote(t),/(\n|^)(\t|[ ]{4,}).*\n$/.test(t.before)&&n.doCode&&n.doCode(t),r&&(t.after=t.selection+t.after,t.selection="")},e.doBlockquote=function(u,e){u.selection=u.selection.replace(/^(\n*)([^\r]+?)(\n*)$/,function(e,t,n,r){return u.before+=t,u.after=r+u.after,n}),u.before=u.before.replace(/(>[ \t]*)$/,function(e,t){return u.selection=t+u.selection,""}),u.selection=u.selection.replace(/^(\s|>)+$/,""),u.selection=u.selection||this.getString("quoteexample");var t="",n="";if(u.before){for(var r=u.before.replace(/\n$/,"").split("\n"),a=!1,o=0;o<r.length;o++){var i=!1,c=r[o],a=a&&0<c.length;/^>/.test(c)?(i=!0,!a&&1<c.length&&(a=!0)):i=!!/^[ \t]*$/.test(c)||a,i?t+=c+"\n":(n+=t+c,t="\n")}/(^|\n)>/.test(t)||(n+=t,t="")}u.startTag=t,u.before=n,u.after&&(u.after=u.after.replace(/^\n?/,"\n")),u.after=u.after.replace(/^(((\n|^)(\n[ \t]*)*>(.+\n)*.*)+(\n[ \t]*)*)/,function(e){return u.endTag=e,""});function l(e){var n=e?"> ":"";u.startTag&&(u.startTag=u.startTag.replace(/\n((>|\s)*)\n$/,function(e,t){return"\n"+t.replace(/^[ ]{0,3}>?[ \t]*$/gm,n)+"\n"})),u.endTag&&(u.endTag=u.endTag.replace(/^\n((>|\s)*)\n/,function(e,t){return"\n"+t.replace(/^[ ]{0,3}>?[ \t]*$/gm,n)+"\n"}))}/^(?![ ]{0,3}>)/m.test(u.selection)?(this.wrap(u,g-2),u.selection=u.selection.replace(/^/gm,"> "),l(!0),u.skipLines()):(u.selection=u.selection.replace(/^[ ]{0,3}> ?/gm,""),this.unwrap(u),l(!1),!/^(\n|^)[ ]{0,3}>/.test(u.selection)&&u.startTag&&(u.startTag=u.startTag.replace(/\n{0,2}$/,"\n\n")),!/(\n|^)[ ]{0,3}>.*$/.test(u.selection)&&u.endTag&&(u.endTag=u.endTag.replace(/^\n{0,2}/,"\n\n"))),u.selection=this.hooks.postBlockquoteCreation(u.selection),/\n/.test(u.selection)||(u.selection=u.selection.replace(/^(> *)/,function(e,t){return u.startTag+=t,""}))},e.doCode=function(t,e){var n,r,u=/\S[ ]*$/.test(t.before);!/^[ ]*\S/.test(t.after)&&!u||/\n/.test(t.selection)?(t.before=t.before.replace(/[ ]{4}$/,function(e){return t.selection=e+t.selection,""}),r=n=1,/(\n|^)(\t|[ ]{4,}).*\n$/.test(t.before)&&(n=0),/^\n(\t|[ ]{4,})/.test(t.after)&&(r=0),t.skipLines(n,r),t.selection?/^[ ]{0,3}\S/m.test(t.selection)?/\n/.test(t.selection)?t.selection=t.selection.replace(/^/gm,"    "):t.before+="    ":t.selection=t.selection.replace(/^(?:[ ]{4}|[ ]{0,3}\t)/gm,""):(t.startTag="    ",t.selection=this.getString("codeexample"))):(t.trimWhitespace(),t.findTags(/`/,/`/),t.startTag||t.endTag?t.endTag&&!t.startTag?(t.before+=t.endTag,t.endTag=""):t.startTag=t.endTag="":(t.startTag=t.endTag="`",t.selection||(t.selection=this.getString("codeexample"))))},e.doList=function(e,t,n){function r(){var e;return n?(e=" "+i+". ",i++):e=" "+o+" ",e}function u(e){return void 0===n&&(n=/^\s*\d/.test(e)),e=e.replace(/^[ ]{0,3}([*+-]|\d+[.])\s/gm,function(e){return r()})}var a=/^\n*(([ ]{0,3}([*+-]|\d+[.])[ \t]+.*)(\n.+|\n{2,}([*+-].*|\d+[.])[ \t]+.*|\n{2,}[ \t]+\S.*)*)\n*/,o="-",i=1;if(e.findTags(/(\n|^)*[ ]{0,3}([*+-]|\d+[.])\s+/,null),!e.before||/\n$/.test(e.before)||/^\n/.test(e.startTag)||(e.before+=e.startTag,e.startTag=""),e.startTag){var c=/\d+[.]/.test(e.startTag);if(e.startTag="",e.selection=e.selection.replace(/\n[ ]{4}/g,"\n"),this.unwrap(e),e.skipLines(),c&&(e.after=e.after.replace(a,u)),n==c)return}var l=1;e.before=e.before.replace(/(\n|^)(([ ]{0,3}([*+-]|\d+[.])[ \t]+.*)(\n.+|\n{2,}([*+-].*|\d+[.])[ \t]+.*|\n{2,}[ \t]+\S.*)*)\n*$/,function(e){return/^\s*([*+-])/.test(e)&&(o=p.$1),l=/[^\n]\n\n[^\n]/.test(e)?1:0,u(e)}),e.selection||(e.selection=this.getString("litem"));var s=r(),d=1;e.after=e.after.replace(a,function(e){return d=/[^\n]\n\n[^\n]/.test(e)?1:0,u(e)}),e.trimWhitespace(!0),e.skipLines(l,d,!0);var f=(e.startTag=s).replace(/./g," ");this.wrap(e,g-f.length),e.selection=e.selection.replace(/\n/g,"\n"+f),this.hooks.commandExecuted("doList")},e.doHeading=function(e,t){if(e.selection=e.selection.replace(/\s+/g," "),e.selection=e.selection.replace(/(^\s+|\s+$)/g,""),!e.selection)return e.startTag="## ",e.selection=this.getString("headingexample"),void(e.endTag=" ##");var n=0;e.findTags(/#+[ ]*/,/[ ]*#+/),/#+/.test(e.startTag)&&(n=p.lastMatch.length),e.startTag=e.endTag="",e.findTags(null,/\s?(-+|=+)/),/=+/.test(e.endTag)&&(n=1),/-+/.test(e.endTag)&&(n=2),e.startTag=e.endTag="",e.skipLines(1,1);var r=0==n?2:n-1;if(0<r){var u=2<=r?"-":"=",a=e.selection.length;for(g<a&&(a=g),e.endTag="\n";a--;)e.endTag+=u}},e.doHorizontalRule=function(e,t){e.startTag="----------\n",e.selection="",e.skipLines(2,1,!0)},e.doMore=function(e,t){e.startTag="\x3c!--more--\x3e\n\n",e.selection="",e.skipLines(2,0,!0)},e.doTab=function(e,t){e.startTag="    ",e.selection=""},C.prototype.doFullScreen=function(e,t){var n=function(){var e={fullScreenChange:["onfullscreenchange","onwebkitfullscreenchange","onmozfullscreenchange","onmsfullscreenchange"],requestFullscreen:["requestFullscreen","webkitRequestFullScreen","mozRequestFullScreen","msRequestFullScreen"],cancelFullscreen:["cancelFullscreen","exitFullScreen","webkitCancelFullScreen","mozCancelFullScreen","msCancelFullScreen"]},t={};for(var n in e){for(var r=e[n].length,u=!1,a=0;a<r;a++){var o=e[n][a];if(void 0!==document[o]||void 0!==document.body[o]){t[n]=o,u=!0;break}}if(!u)return!1}return t}(),r=this;if(!n)return alert(r.getString("fullscreenUnsupport")),!1;this.fullScreenBind||(v.addEvent(document,n.fullScreenChange.substring(2),function(){u()?(e.fullscreen.style.display="none",e.exitFullscreen.style.display="",r.hooks.enterFullScreen()):(e.fullscreen.style.display="",e.exitFullscreen.style.display="none",r.hooks.exitFullScreen())}),this.fullScreenBind=!0),t?(r.isFakeFullScreen?(document.body[n.requestFullscreen]("webkitRequestFullScreen"==n.requestFullscreen?Element.ALLOW_KEYBOARD_INPUT:null),r.isFakeFullScreen=!1):u()||(e.exitFullscreen.style.display="",r.hooks.enterFakeFullScreen(),r.isFakeFullScreen=!0),window.fullScreenEntered=!0):(r.isFakeFullScreen?(e.exitFullscreen.style.display="none",r.hooks.exitFullScreen()):u()&&document[n.cancelFullscreen](),r.isFakeFullScreen=!1,window.fullScreenEntered=!1)}}();